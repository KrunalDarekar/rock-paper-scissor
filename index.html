<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <button class="rock">rock</button>
    <button class="paper">paper</button>
    <button class="scissor">scissor</button>
    <div class="score"></div>
    <div class="result"></div>
    
    <script>
        
        // const rockBtn = document.querySelector('.rock');
        // const paperBtn = document.querySelector('.paper');
        // const scissorBtn = document.querySelector('.scissor');

        const buttons = document.querySelectorAll('button');
        const score = document.querySelector('.score');
        const result = document.querySelector('.result');

        let playerScore = 0;
        let computerScore = 0;

        buttons.forEach((button) => {
            button.addEventListener('click', game );
        });
        
        function getComputerChoice() {
            let computerChoice;
            let randomInt = Math.ceil(Math.random()*3);
            
            switch(randomInt) {
                case 1: 
                    computerChoice = 'rock';
                    break;
                case 2: 
                    computerChoice = 'paper';
                    break;
                case 3: 
                    computerChoice ='scissor';
                    break;
                default: computerChoice ='well this should not be happening';
            }

            return computerChoice;
        }

        function getPlayerChoice() {
            let playerChoice = prompt('Select your choice (rock, paper or scissor)');
            
            return playerChoice;
        }

        function playRound(playerSelection) {
            
            let result;
            
            playerSelection = playerSelection.toUpperCase();
            computerSelection = getComputerChoice().toUpperCase();

            if (playerSelection === 'ROCK') {
                if (computerSelection === 'ROCK') {
                    result = 'Ah! tie round';
                } else if (computerSelection === 'SCISSOR') {
                    result = 'You have won the round!';
                } else {
                    result = 'You have lost the round!';
                }
            } else if (playerSelection === 'PAPER') {
                if (computerSelection === 'PAPER') {
                    result = 'Ah! tie round';
                } else if (computerSelection === 'ROCK') {
                    result = 'You have won the round!';
                } else {
                    result = 'You have lost the round!';
                }
            } else {
                if (computerSelection === 'SCISSOR') {
                    result = 'Ah! tie round';
                } else if (computerSelection === 'PAPER') {
                    result = 'You have won the round!';
                } else {
                    result = 'You have lost the round!';
                }
            }

            return result;

        }

        function game() {
            let playerChoice = this.classList.value;
            let roundResult = playRound(playerChoice);
                                
            if (roundResult === 'You have won the round!') {                    
                playerScore++;
            } else if (roundResult === 'You have lost the round!') {
                computerScore++;
            }

            if(playerScore < 5 && computerScore < 5) {
                score.textContent = `you : ${playerScore}   ::   computer : ${computerScore}`;
                result.textContent = "";
            } else {
                score.textContent = `you : ${playerScore}   ::   computer : ${computerScore}`;
                    
                if (playerScore > computerScore){
                    result.textContent = "you have won the game !!!";
                } else {
                    result.textContent = "you have lost the game";
                }

                playerScore = computerScore = 0;
            }
        }

    </script>
    
</body>
</html>